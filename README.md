# –ü–æ–∫—Ä–æ–≤—Å–∫–∏–π Schedule Bot (Telegram, aiogram v3)

–ü—Ä–æ–µ–∫—Ç Telegram‚Äë–±–æ—Ç–∞ –¥–ª—è —à–∫–æ–ª—ã ¬´–ö–æ–º–ø–ª–µ–∫—Å –ü–æ–∫—Ä–æ–≤—Å–∫–∏–π¬ª. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- –ê–≤—Ç–æ–ø–æ–∏—Å–∫ –¥–∞—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–ø–ª–æ—â–∞–¥–∫–∞ ‚Ññ1) —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —à–∫–æ–ª—ã
- –ü–∞—Ä—Å–∏–Ω–≥ Google Sheets (CSV, –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–æ–≤
- –£–¥–æ–±–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –ª–æ–∞–¥–µ—Ä ¬´‚öôÔ∏è –ó–∞–≥—Ä—É–∂–∞—é‚Ä¶¬ª
- –ö–Ω–æ–ø–∫–∞ ¬´üîî –ù–æ–≤–æ—Å—Ç–Ω–æ–π –∫–∞–Ω–∞–ª¬ª
- –ê–¥–º–∏–Ω–∫–∞ `/admin` (–Ω–µ –≤ –º–µ–Ω—é), —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ SQLite
- **–ê–≤—Ç–æ–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å**: –∫–∞–∂–¥—ã–µ 5‚Äì10 –º–∏–Ω—É—Ç –∏—â–µ—Ç –Ω–æ–≤—ã–µ –¥–∞—Ç—ã –∏ –ø—Ä–∞–≤–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

> ‚ö†Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ –∫–æ–¥–µ/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env`.
> –ï—Å–ª–∏ –≤—ã —Å–ª—É—á–∞–π–Ω–æ –∑–∞—Å–≤–µ—Ç–∏–ª–∏ —Ç–æ–∫–µ–Ω, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ **–ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ** –≤ `@BotFather`.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

2) –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (—Å–º. –ø—Ä–∏–º–µ—Ä `.env.example`) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è.

3) –ó–∞–ø—É—Å–∫:

```bash
python -m pokrovsky_bot
```

–∏–ª–∏

```bash
python run.py
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–º. `.env.example` –∏ `src/pokrovsky_bot/config.py`:

- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç `@BotFather` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `ADMIN_ID` ‚Äî Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—á–∏—Å–ª–æ)
- `NEWS_CHANNEL_URL` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–æ–≤–æ—Å—Ç–Ω–æ–π –∫–∞–Ω–∞–ª
- `PAGE_URL` ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π
- `DB_PATH` ‚Äî –ø—É—Ç—å –∫ SQLite –±–∞–∑–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `bot_stats.sqlite3`)
- `TZ` ‚Äî —Ç–∞–π–º–∑–æ–Ω–∞ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Europe/Moscow`)

## –ó–∞–ø—É—Å–∫ –≤ Docker

```bash
docker build -t pokrovsky-bot .
docker run --env-file .env --name pokrovsky-bot --restart unless-stopped pokrovsky-bot
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ .env.example
‚îú‚îÄ requirements.txt
‚îú‚îÄ Dockerfile
‚îú‚îÄ run.py
‚îî‚îÄ src/pokrovsky_bot
   ‚îú‚îÄ __init__.py
   ‚îú‚îÄ bot.py            # —Å–æ–∑–¥–∞–Ω–∏–µ Bot/Dispatcher, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤
   ‚îú‚îÄ config.py         # –∫–æ–Ω—Ñ–∏–≥ + –∑–∞–≥—Ä—É–∑–∫–∞ .env
   ‚îú‚îÄ db.py             # SQLite –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
   ‚îú‚îÄ handlers.py       # –∫–æ–º–∞–Ω–¥—ã –∏ –∫–æ–ª–±—ç–∫–∏
   ‚îú‚îÄ http.py           # HTTP-–∑–∞–ø—Ä–æ—Å—ã
   ‚îú‚îÄ keyboard.py       # –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
   ‚îú‚îÄ models.py         # dataclass SLink
   ‚îú‚îÄ parser.py         # –ø–∞—Ä—Å–∏–Ω–≥ CSV/–≤—Ä–µ–º–µ–Ω–∏/–∫–∞–±–∏–Ω–µ—Ç–æ–≤/—Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
   ‚îú‚îÄ sheets.py         # —Ä–∞–±–æ—Ç–∞ —Å Google Sheets
   ‚îú‚îÄ site.py           # –ø–∞—Ä—Å–∏–Ω–≥ —Å–∞–π—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
   ‚îú‚îÄ state.py          # –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –∫—ç—à –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã/—Ä–µ–≥—É–ª—è—Ä–∫–∏
   ‚îú‚îÄ utils.py          # —Ö–µ–ª–ø–µ—Ä—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   ‚îú‚îÄ watcher.py        # –∞–≤—Ç–æ–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
   ‚îî‚îÄ main.py           # entrypoint
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT (–∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ —Å–≤–æ—é).
# moyproject
# testnet
